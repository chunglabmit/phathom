language: python
sudo: required
python:
   - 3.5

before_install:
    - set -e  # fail on any error
    - sudo apt-get update -q
    - set -x; sudo apt-get install -y -q openmpi-bin libopenmpi-dev

install:
   - pip install -r requirements.txt
   - pip install --editable .
   - pip install nose
script:
   - nosetests tests
   - PHATHOM_MAPPER=MpiScatter,PHATHOM_NODES=10 nosetests tests
