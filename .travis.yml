language: python
sudo: required
python:
   - 3.5

before_install:
    - set -e  # fail on any error
    - sudo apt-get update -q
    - set -x; sudo apt-get install -y -q openmpi-bin libopenmpi-dev

install:
   - pip install --upgrade pip
   - pip install Cython>=0.23
   - pip install --no-binary scikit-image scikit-image
   - pip install --progress-bar off -r requirements.txt
   - pip install --progress-bar off --editable .
   - pip install --progress-bar off nose
   - pip install --progress-bar off torch
script:
   - python -c "import phathom.segmentation.segmentation"
   - nosetests tests -s -v
